(function(){"use strict";var i,t=this;i="undefined"!=typeof exports?exports:t.Bobun={},i.VERSION="0.4.0";var n=t._;n||"undefined"==typeof require||(n=require("underscore"));var e=t.Backbone;e||"undefined"==typeof require||(e=require("backbone")),e.ChildViewContainer=t.Backbone?t.Backbone.ChildViewContainer:void 0,e.ChildViewContainer||"undefined"==typeof require||(e.ChildViewContainer=require("backbone.babysitter")),i.Binding=function(t){return t instanceof i.Binding?t:this instanceof i.Binding?(this._wrapped=t,void 0):new i.Binding(t)};var o=function(i){return i="string"==typeof i?[i]:i,n.isArray(i)?n.object(i,i):i};i.Binding.bindTo=function(i,t,e){return i&&t&&e?(e=o(e),n.each(e,function(n,e){i.on("change:"+e,function(i,e){t.set(n,e)})}),i):void 0},i.Binding.bind=function(t,e,r){return r=o(r),i.Binding.bindTo(t,e,r),i.Binding.bindTo(e,t,n.invert(r)),t},n.each(["bindTo","bind"],function(t){i.Binding.prototype[t]=function(){return i.Binding[t].apply(this._wrapped,[this._wrapped].concat(n.toArray(arguments)))}}),i.View=e.View.extend({template:null,_configure:function(){e.View.prototype._configure.apply(this,arguments),this.views=new e.ChildViewContainer(this.options.views||[]),this.on("change:views",function(){this.views=new e.ChildViewContainer(this.options.views||[]),this.render()}),n.each(this.options,function(i,t){this._bindModelOption(t)},this)},_bindModelOption:function(i,t){var n,e,o;t=t||this.model,n=this.options[i],t&&i&&"string"==typeof n&&(e=n.match(/model\.(.*)/),e&&(o={},o[i]=e[1],this.bind(t,o),this.set(i,t.get(e[1]),{silent:!0})))},append:function(i,t){return this.views.add(i),t=t||this.$el,t=n.isString(t)?this.$el.find(t):e.$(t),t.append(i.render().el),i.delegateEvents(),this},assign:function(i,t){return this.views.add(t),t.setElement(this.$(i)).render(),this},toJSON:function(){return{collection:this.collection?this.collection.toJSON():null,model:this.model?this.model.toJSON():null}},render:function(){return this.template&&this.$el.html(this.template(this.toJSON())),this},domEventTriggerProxy:function(i){this.trigger("$"+i.type,i,this)},remove:function(){return e.View.prototype.remove.apply(this,arguments),this.clearViews()},clearViews:function(){return this.views.each(n.bind(function(i){this.views.remove(i.remove())},this)),this},stopListening:function(){e.View.prototype.stopListening.apply(this,arguments),this.views.invoke.apply(this.views,["stopListening"].concat(n.toArray(arguments)))}}),n.each(["set","get","_validate","previous"],function(t){i.View.prototype[t]=function(){var i,n=this.attributes;return this.attributes=this.options,i=e.Model.prototype[t].apply(this,arguments),this.attributes=n,i}}),n.each(["bindTo","bind"],function(t){i.View.prototype[t]=function(){return i.Binding[t].apply(this,[this].concat(n.toArray(arguments)))}})}).call(this);
//@ sourceMappingURL=bobun.min.map